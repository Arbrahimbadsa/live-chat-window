(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{42:function(e,t,a){},43:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var c=a(4),n=a(2),s=a.n(n),i=a(31),o=a.n(i),r=(a(42),a(43),a(18)),d=a(21),u=a(11),j=a(71),l=a(14);l.a.initializeApp({apiKey:"AIzaSyBUt8HJpxv8r-kEAMU4g4PR9dqHyV-s_CA",authDomain:"live-chat-29783.firebaseapp.com",databaseURL:"https://live-chat-29783.firebaseio.com",projectId:"live-chat-29783",storageBucket:"live-chat-29783.appspot.com",messagingSenderId:"36963800701",appId:"1:36963800701:web:3f3b9828f1425a53438314",measurementId:"G-2FB14HT703"});var b=a(23),m=l.a.database(),O=function(){var e;return null==localStorage.getItem("uuid")?(e=Object(j.a)(),localStorage.setItem("uuid",e),e):localStorage.getItem("uuid")}(),h=m.ref("rooms/"+O),f=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)(""),o=Object(u.a)(i,2),m=(o[0],o[1],Object(n.useState)(0)),f=Object(u.a)(m,2),p=f[0],v=f[1],g=Object(n.useState)(!1),x=Object(u.a)(g,2),S=x[0],I=x[1];Object(n.useEffect)((function(){h.orderByChild("time").on("child_added",(function(e){var t=e.val(),a=t.roomId===O?"me":"them";k(a,t.data),v((function(e){return e+1}))}))}),[]);var k=function(e,t){t.text&&s((function(a){return[].concat(Object(d.a)(a),[{author:e,type:"text",data:t}])}))};return Object(c.jsxs)("div",{className:"chat-window",children:[Object(c.jsx)("p",{style:{margin:"10px"},children:"Go to /admin to see the admin window."}),Object(c.jsx)(b.a,{agentProfile:{teamName:"Eqsist",imageUrl:"https://a.slack-edge.com/66f9/img/avatars-teams/ava_0001-34.png"},messageList:a,onMessageWasSent:function(e){var t=Object(j.a)();h.child(t).set(Object(r.a)(Object(r.a)({},e),{},{roomId:O,time:l.a.database.ServerValue.TIMESTAMP}))},newMessagesCount:p,handleClick:function(){I(!S),v(0)},isOpen:S})]})},p=l.a.database(),v=p.ref("rooms"),g=function(e){var t=e.name,a=e.click;return Object(c.jsx)("div",{onClick:a,className:"room",children:Object(c.jsxs)("p",{children:[" ",t," "]})})},x=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],s=t[1],i=Object(n.useState)(!1),o=Object(u.a)(i,2),m=o[0],O=o[1],h=Object(n.useState)(!1),f=Object(u.a)(h,2),x=f[0],S=f[1],I=Object(n.useState)(5),k=Object(u.a)(I,2),w=k[0],y=k[1],C=Object(n.useState)([]),M=Object(u.a)(C,2),A=M[0],E=M[1],N=Object(n.useState)(null),B=Object(u.a)(N,2),P=B[0],T=B[1],L=Object(n.useState)(""),_=Object(u.a)(L,2),F=_[0],R=_[1];Object(n.useEffect)((function(){v.on("child_added",(function(e){s((function(t){return[].concat(Object(d.a)(t),[e.key])}))}))}),[]),Object(n.useEffect)((function(){(E([]),P)&&p.ref("rooms/"+P).orderByChild("time").on("child_added",(function(e){var t=e.val(),a=t.roomId===P?"me":"them";U(a,t.data),y((function(e){return e+1}))}))}),[P]);var U=function(e,t){t.text&&E((function(a){return[].concat(Object(d.a)(a),[{author:e,type:"text",data:t}])}))};return Object(c.jsxs)("div",{className:"admin-window",children:[Object(c.jsxs)("div",{className:"admin-window-header",children:[Object(c.jsx)("h3",{children:"All Rooms"}),Object(c.jsxs)("p",{children:["You have ",a.length," rooms. Select a room to start replying."]})]}),Object(c.jsx)("div",{className:"rooms",children:a?a.map((function(e,t){return Object(c.jsx)(g,{id:e,name:"Room "+(t+1),click:function(){return T((a={key:e,name:"Room "+(t+1)}).key),R(a.name),S(!0),void O(!0);var a}},t)})):"Loading..."}),x?Object(c.jsx)(b.a,{agentProfile:{teamName:F,imageUrl:"https://a.slack-edge.com/66f9/img/avatars-teams/ava_0001-34.png"},messageList:A,newMessagesCount:w,isOpen:m,handleClick:function(){O(!m),y(0)},onMessageWasSent:function(e){var t=Object(j.a)();p.ref("rooms/"+P).child(t).set(Object(r.a)(Object(r.a)({},e),{},{roomId:P,time:l.a.database.ServerValue.TIMESTAMP}))}}):null]})},S=a(34),I=a(7);var k=function(){return Object(c.jsx)(S.a,{children:Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(I.c,{children:[Object(c.jsx)(I.a,{exact:!0,path:"/",children:Object(c.jsx)(f,{})}),Object(c.jsx)(I.a,{path:"/admin",children:Object(c.jsx)(x,{})})]})})})},w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,72)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))};o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(k,{})}),document.getElementById("root")),w()}},[[70,1,2]]]);
//# sourceMappingURL=main.3a9bcf24.chunk.js.map